# GuÃ­a Visual del Modal PlanSelector

## ğŸ¨ Comportamiento Visual

### Estado Inicial: ShareURLModal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compartir InvitaciÃ³n                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  OpciÃ³n BÃ¡sica                         â”‚
â”‚  [URL normal...]  [Copiar]             â”‚
â”‚                                        â”‚
â”‚  OpciÃ³n Premium                        â”‚
â”‚  [Preview URL...] [ğŸ”“ Desbloquear]     â”‚ â† Usuario hace clic aquÃ­
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Usuario hace clic en "Desbloquear"

#### â¬‡ï¸ Se abre PlanSelector como modal flotante

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  FONDO NEGRO CON 50% DE TRANSPARENCIA (bg-black/50)          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                     [X]       â”‚ â† BotÃ³n cerrar
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚     â”‚                                                 â”‚      â”‚
â”‚     â”‚        Elige el plan perfecto                   â”‚      â”‚
â”‚     â”‚  Crea invitaciones digitales inolvidables      â”‚      â”‚
â”‚     â”‚                                                 â”‚      â”‚
â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚     â”‚  â”‚ Plan BÃ¡sico  â”‚  â”‚  Plan Premium â­    â”‚    â”‚      â”‚
â”‚     â”‚  â”‚              â”‚  â”‚  (Recomendado)      â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  S/ 99       â”‚  â”‚                     â”‚    â”‚      â”‚
â”‚     â”‚  â”‚              â”‚  â”‚  S/ 140             â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ 1 ediciÃ³n â”‚  â”‚  âœ“ 3 ediciones âš¡   â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ PDF       â”‚  â”‚  âœ“ PDF              â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ Link      â”‚  â”‚  âœ“ Link corto âš¡     â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ Countdown â”‚  â”‚  âœ“ QR diseÃ±o âš¡      â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ LocaciÃ³n  â”‚  â”‚  âœ“ EstadÃ­sticas âš¡  â”‚    â”‚      â”‚
â”‚     â”‚  â”‚  âœ“ WhatsApp  â”‚  â”‚                     â”‚    â”‚      â”‚
â”‚     â”‚  â”‚              â”‚  â”‚  [âœ“ Plan            â”‚    â”‚      â”‚
â”‚     â”‚  â”‚ [Seleccionar]â”‚  â”‚   Seleccionado] â†â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€ Usuario hace clic
â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚     â”‚                                                 â”‚      â”‚
â”‚     â”‚   Pago seguro con: Izipay | Yape | Visa       â”‚      â”‚
â”‚     â”‚                                                 â”‚      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                               â”‚
â”‚  EL CONTENIDO FLOTA SOBRE EL OVERLAY TRANSPARENTE            â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CaracterÃ­sticas del Modal Flotante:

#### 1. **Overlay (Fondo)**
```css
/* Cubre TODA la pantalla */
position: fixed;
inset: 0; /* top: 0, right: 0, bottom: 0, left: 0 */
background: rgba(0, 0, 0, 0.5); /* Negro al 50% */
z-index: 50;
```

#### 2. **Contenido Centrado**
```css
/* Centrado vertical y horizontalmente */
position: fixed;
inset: 0;
display: flex;
align-items: center; /* Centrado vertical */
justify-content: center; /* Centrado horizontal */
padding: 1rem; /* Espaciado en mÃ³viles */
overflow-y: auto; /* Scroll si es necesario */
```

#### 3. **Contenedor del PlanSelector**
```css
/* Sin restricciones de tamaÃ±o fijo */
width: 100%;
max-width: 7xl; /* 80rem / 1280px */
/* Se adapta al contenido */
```

#### 4. **BotÃ³n Cerrar (X)**
```css
/* Esquina superior derecha */
position: absolute;
right: 1.5rem;
top: 1.5rem;
z-index: 60; /* Por encima del contenido */
background: rgba(255, 255, 255, 0.1); /* Fondo semi-transparente */
color: white;
```

## ğŸ”„ Flujo de InteracciÃ³n

### Paso 1: Usuario en ShareURLModal
```
Usuario â†’ Ve "OpciÃ³n Premium"
       â†’ Click "Desbloquear"
```

### Paso 2: Se abre PlanSelector Modal
```
Sistema â†’ Cierra ShareURLModal (temporalmente)
       â†’ Abre overlay negro 50% transparente
       â†’ Muestra PlanSelector flotante centrado
       â†’ Plan Premium pre-seleccionado
```

### Paso 3: Usuario selecciona Premium
```
Usuario â†’ Ve botÃ³n "âœ“ Plan Seleccionado" (verde)
       â†’ Click en el botÃ³n
```

### Paso 4: Se genera Short URL
```
Sistema â†’ Cierra PlanSelector Modal
       â†’ Ejecuta handlePremiumUnlocked()
       â†’ Genera short URL en backend
       â†’ Muestra toast "URL personalizada generada"
       â†’ Regresa a ShareURLModal con URL generada
```

## ğŸ“ Responsividad

### Desktop (1920x1080)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Overlay 50% transparente                â”‚
â”‚                                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  PlanSelector (max-w-7xl)        â”‚       â”‚
â”‚    â”‚  Centrado perfectamente          â”‚       â”‚
â”‚    â”‚  Ambos planes lado a lado        â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet (768x1024)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Overlay 50%             â”‚
â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ PlanSelector     â”‚    â”‚
â”‚  â”‚ Planes lado a    â”‚    â”‚
â”‚  â”‚ lado (apretados) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (375x667)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Overlay 50%     â”‚
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ PlanSelectorâ”‚ â”‚
â”‚ â”‚ Scroll â†•    â”‚ â”‚
â”‚ â”‚ Planes      â”‚ â”‚
â”‚ â”‚ apilados    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Elementos Clave Implementados

### âœ… 1. Overlay Transparente al 50%
```tsx
<DialogOverlay className="bg-black/50" />
```
- Fondo negro con 50% de opacidad
- Cubre toda la pantalla
- Permite ver contenido detrÃ¡s (difuso)

### âœ… 2. Contenido Sin Restricciones
```tsx
<DialogPrimitive.Content className="fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto">
  <div className="w-full max-w-7xl">
    {content}
  </div>
</DialogPrimitive.Content>
```
- No tiene `max-w-lg` ni tamaÃ±os fijos
- Se adapta al contenido real del PlanSelector
- Centrado perfectamente

### âœ… 3. BotÃ³n Cerrar Flotante
```tsx
<DialogPrimitive.Close className="absolute right-6 top-6 ... bg-white/10 hover:bg-white/20">
  <svg><!-- X icon --></svg>
</DialogPrimitive.Close>
```
- PosiciÃ³n fija en esquina
- Fondo semi-transparente blanco
- Hover effect

### âœ… 4. PrevenciÃ³n de Cierre Accidental
```tsx
onPointerDownOutside={(e) => e.preventDefault()}
```
- Usuario NO puede cerrar haciendo clic fuera
- Solo con botÃ³n X o ESC

## ğŸ¨ Capas (Z-Index)

```
Z-50:  Overlay negro 50%
Z-50:  Contenido del modal (PlanSelector)
Z-60:  BotÃ³n cerrar (X)
```

## ğŸ”§ CÃ³digo Implementado

### PlanSelector.tsx - SecciÃ³n Modal
```typescript
if (asModal && onClose) {
  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogPortal>
        {/* Overlay con 50% de transparencia */}
        <DialogOverlay className="bg-black/50" />

        {/* Contenido centrado sin restricciones de tamaÃ±o */}
        <DialogPrimitive.Content
          className="fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto"
          onPointerDownOutside={(e) => e.preventDefault()}
        >
          <div className="w-full max-w-7xl">
            {content} {/* Todo el diseÃ±o de PlanSelector */}
          </div>

          {/* BotÃ³n de cerrar (X) */}
          <DialogPrimitive.Close className="absolute right-6 top-6 ...">
            <svg><!-- X icon --></svg>
          </DialogPrimitive.Close>
        </DialogPrimitive.Content>
      </DialogPortal>
    </Dialog>
  );
}
```

## ğŸ“± Experiencia de Usuario

### Estado 1: Inicial
```
[Invitaciones List] â†’ Click "Copiar URL" â†’ [ShareURLModal se abre]
```

### Estado 2: Desbloqueo
```
[ShareURLModal] â†’ Click "Desbloquear" â†’ [Overlay 50% aparece]
                                     â†’ [PlanSelector flota centrado]
```

### Estado 3: SelecciÃ³n
```
[PlanSelector Modal] â†’ Click "âœ“ Plan Seleccionado"
                    â†’ [Modal se cierra]
                    â†’ [Genera short URL]
                    â†’ [Toast aparece]
```

### Estado 4: Completado
```
[ShareURLModal reaparece] â†’ URL Premium generada
                         â†’ BotÃ³n cambia a "Copiar"
                         â†’ Usuario puede copiar
```

## ğŸ­ ComparaciÃ³n: Antes vs Ahora

### ANTES (Incorrecto) âŒ
```
- Modal con tamaÃ±o fijo (max-w-lg)
- No overlay visible o mal configurado
- Contenido restringido
- Parece una caja pequeÃ±a
```

### AHORA (Correcto) âœ…
```
- Modal flotante sobre TODO
- Overlay negro 50% transparente
- Contenido se adapta (max-w-7xl)
- Parece un modal profesional
- Centrado perfecto
- BotÃ³n X visible
```

## ğŸš€ CÃ³mo Probar

1. **Abrir navegador**: `http://localhost:3000/mi-cuenta/invitaciones`
2. **Click "Copiar URL"** en cualquier invitaciÃ³n
3. **Click "Desbloquear"** en secciÃ³n Premium
4. **Verificar**:
   - âœ… Fondo negro semi-transparente (50%)
   - âœ… PlanSelector flotante centrado
   - âœ… Se ve TODO el contenido
   - âœ… BotÃ³n X en esquina superior derecha
   - âœ… No se puede cerrar haciendo clic fuera
5. **Click "âœ“ Plan Seleccionado"**
6. **Verificar**:
   - âœ… Modal se cierra
   - âœ… Toast de Ã©xito
   - âœ… URL generada aparece

---

**Implementado**: 2025-10-12
**Estado**: âœ… Completo
**Visual**: Modal flotante con overlay 50% transparente
